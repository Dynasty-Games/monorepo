import{s as e,$ as t}from"./lit-element-a17b94b5.js";customElements.define("busy-animation",class extends e{constructor(){super()}render(){return t`<style>:host{display:block;width:40px;height:40px;margin:0 auto;background-color:#333;border-radius:100%;-webkit-animation:scale 1s infinite ease-in-out;animation:scale 1s infinite ease-in-out}@-webkit-keyframes scale{0%{-webkit-transform:scale(0)}100%{-webkit-transform:scale(1);opacity:0}}@keyframes scale{0%{-webkit-transform:scale(0);transform:scale(0)}100%{-webkit-transform:scale(1);transform:scale(1);opacity:0}}</style>`}}),customElements.define("custom-dialog",class extends e{constructor(){super()}render(){return t`<style>:host{display:flex;flex-direction:column;transition:transform 120ms ease-out;pointer-events:auto;opacity:1;position:absolute;background:var(--secondary-background-color);max-width:480px;width:100%;height:256px;border-radius:48px;box-shadow:0 0 7px 9px #00000012;overflow:hidden;justify-content:center;align-items:center}.busy-container{position:absolute;max-width:480px;width:100%;height:256px;justify-content:center;align-items:center;background:var(--secondary-background-color);opacity:0;pointer-events:none}:host([busy]) .busy-container{opacity:1}:host([busy]){pointer-events:none}</style><flex-column class="busy-container"><h4>Sending funds!</h4><busy-animation></busy-animation></flex-column><slot></slot>`}});var o=customElements.define("home-view",class extends e{static properties={dialogShown:{type:Boolean},submitDisabled:{type:Boolean},busyShown:{type:Boolean},address:{type:String}};constructor(){super(),this.submitDisabled=!0,this.dialogShown=!1,this.busyShown=!0,this.dgcTX="",this.etherTX=""}connectedCallback(){super.connectedCallback(),this.address=location.href.split("=")[1],this.address&&(this.submitDisabled=!1)}async#e(){try{"0x5"!==ethereum.chainId&&await ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:"0x5"}]});await ethereum.request({method:"wallet_watchAsset",params:{type:"ERC20",options:{address:this.tokenAddress,symbol:"USDD",decimals:8}}})}catch(e){console.log(e)}}#t(){this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((()=>{42===this.shadowRoot.querySelector("input").value.length?this.submitDisabled=!1:this.submitDisabled=!0}),100)}async#o(){this.submitDisabled=!0,this.dialogShown=!0,this.busyShown=!0;const e=this.shadowRoot.querySelector("input").value;let t=await fetch(`https://dynasty-api.leofcoin.org/faucet?address=${e}`),o=await t.text();o=JSON.parse(o),this.etherTX=o.ether,this.dgcTX=o.dgc,this.tokenAddress=o.address,this.shadowRoot.querySelector("input").value=null,this.busyShown=!1}render(){return t`<style>*{font-family:'Noto Sans',sans-serif}:host{flex:1 1 auto;align-items:center;justify-content:center}h4{margin:0}section{width:100%;height:220px;padding-bottom:24px}.container{background:var(--secondary-background-color);max-width:480px;border-radius:48px;box-shadow:0 0 7px 9px #00000012;overflow:hidden}.container,section{display:flex;flex-direction:column;width:100%;align-items:center;justify-content:center}flex-row{width:100%;align-items:center;box-sizing:border-box;padding:0 48px}.top{padding-top:24px;background:#573e6a;color:#eee}.bottom{padding-bottom:24px;background:#573e6a;color:#eee}.applink,button{text-decoration:none;background:#573e6a;padding:12px 24px;box-sizing:border-box;border-radius:12px;color:#eee;border-color:#eee;font-weight:700;text-transform:uppercase;pointer-events:auto;cursor:pointer}input{width:100%;pointer-events:auto;max-width:332px;border-radius:12px;display:flex;align-items:center;height:var(--custom-input-height,48px);background:var(--custom-input-background,transparent);width:100%;box-shadow:0 1px 3px -1px #333;min-width:240px;--custom-input-color:#555;--custom-input-outline:none;--webkit-visibility:none;border:none;background:0 0;height:var(--custom-input-height,48px);width:100%;box-sizing:border-box;padding:10px;color:var(--custom-input-color,#555);outline:var(--custom-input-outline)}[hidden] a{pointer-events:none}[hidden]{pointer-events:none;opacity:0;transform:scale(-1)}[disabled]{pointer-events:none;opacity:.5}</style><section class="container"><h1>Dynasty Games Faucet</h1><flex-one></flex-one><input placeholder="address" value="${this.address}" @input="${this.#t}"><flex-two></flex-two><button @click="${this.#o}" ?disabled="${this.submitDisabled}">SUBMIT</button></section><custom-dialog ?hidden="${!this.dialogShown}" ?busy="${this.busyShown}"><flex-one></flex-one><h4>0.01 ETH sended</h4><a href="https://goerli.etherscan.io/tx/${this.etherTX}">${this.etherTX.slice(0,10)}...${this.etherTX.slice(-10)}</a><h4>100 USDD sended</h4><a href="https://goerli.etherscan.io/tx/${this.dgcTX}">${this.dgcTX.slice(0,10)}...${this.dgcTX.slice(-10)}</a><flex-two></flex-two><button @click="${this.#e}" ?disabled="${this.alreadyAdded}">Add USDD To Wallet</button> <a class="applink" href="https://dynastygames.games">Go to Dynasty contests</a><flex-one></flex-one></custom-dialog>`}});export{o as default};
